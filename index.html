<!DOCTYPE html><html><head><title>Welcome to HU</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>#backstage .panel h2{margin:0}#backstage .panel h2 button{text-align:left;background:none;border:none;width:100%;font-weight:400;text-transform:uppercase;font-size:70%;letter-spacing:.075em;font-size:11px;padding:0 8px}#backstage .panel h2 button:before{content:"\25BA";display:inline-block;width:1.25em}#backstage .panel h2 button:hover{color:#495057}#backstage .panel.open h2 button:before{content:"\25BC"}
#backstage table.history td.actions{width:2.5em}#backstage table.history td.go[rowspan="2"]{border-right:1px solid #000}
#backstage ul.tabs{list-style:none;margin:8px;padding:0;display:flex;border:1px solid #000;font-size:12px}#backstage ul.tabs li{flex-grow:1;border-right:1px solid #000;text-align:center}#backstage ul.tabs li:last-child{border-right:none}#backstage ul.tabs li button{color:#000;text-decoration:none;display:block;width:100%;height:28px;padding:8px;border:none;border-radius:0}#backstage ul.tabs li button.active{background:#000;color:#dee2e6}#backstage .tab-content{max-height:calc(100vh - $backstage-tab-height);overflow:auto}
body.backstage-visible #backdrop{justify-content:flex-start;max-width:calc(100vw - 30rem);padding-right:calc(30px - 1em)}#backstage{position:fixed;top:0;right:0;bottom:0;width:30rem;max-height:100vh;font-size:18px;background:#dee2e6;color:#000;transform:translateX(100%);box-shadow:inset 2px 0 3px rgba(0,0,0,.25);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu Cantarell,Helvetica Neue,sans-serif;font-size:80%}#backstage:before{content:"";position:absolute;z-index:2;top:calc(50% - 25px);right:calc(100% - 4px);height:50px;width:4px;background:#dee2e6}#backstage.open{transform:none}#backstage .toggle-visibility{position:absolute;z-index:1;top:calc(50% - 25px);right:100%;width:25px;height:50px;padding:0;background:#dee2e6;color:#000;border:none;border-top-left-radius:25px;border-bottom-left-radius:25px;border-top-right-radius:0;border-bottom-right-radius:0;box-shadow:inset 2px 0 3px rgba(0,0,0,.25);font-size:18px}#backstage button{color:#000;background:transparent;padding:8px;border-radius:16px;border:1px solid #000}#backstage button:hover{background:#e9ecef}#backstage p{padding:0 8px}#backstage li,#backstage p,#backstage td{font-size:12px}#backstage input,#backstage select{color:#000;background:transparent;border:1px solid #000;padding:8px}#backstage table{background:transparent;table-layout:fixed;border-collapse:collapse;width:calc(100% - 16px);margin:8px}#backstage th{text-align:left}#backstage td{position:relative;border:1px solid #000;padding:8px;vertical-align:top}#backstage td:first-child{border-left:none}#backstage td:last-child{border-right:none}#backstage td button,#backstage td input{background:none;border:none;border-radius:0;position:absolute;top:0;left:0;bottom:0;width:100%;padding:8px}#backstage textarea{background:transparent;border:1px solid #000;color:#000;padding:8px;width:100%;height:7.75em}#backstage .block{display:block;margin:8px;width:calc(100% - 16px)}#backstage .disabled{color:#868e96}#backstage .indented-input{margin-left:calc(10em + 8px);font-size:12px}#backstage .input-group{display:flex;align-items:center}#backstage .input-group label:first-child{text-align:right;margin-right:8px;width:10em}#backstage .input-group input,#backstage .input-group select{flex-grow:1}#backstage .segmented-button{display:flex}#backstage .segmented-button button{border-left:none;border-radius:0;margin:0;flex-grow:1}#backstage .segmented-button button:first-child{border-left:1px solid #000;border-top-left-radius:16px;border-bottom-left-radius:16px}#backstage .segmented-button button:last-child{border-top-right-radius:16px;border-bottom-right-radius:16px}#backstage .segmented-button .fixed{flex-grow:0;min-width:24px}#backstage .tab-content{max-height:calc(100vh - 28px);overflow:auto}
.fade-in{opacity:0;animation:fade-in 1s ease-out forwards}.fade-out{animation:fade-in 1s ease-out reverse forwards}@keyframes fade-in{0%{opacity:0}to{opacity:1}}
#backdrop{min-height:100vh;align-items:center}#backdrop,#page{display:flex;justify-content:center}#page{flex-direction:column;width:40em;min-height:calc(100vh - 2em);max-width:calc(100vw - 2em);line-height:150%;margin:1em;padding:4em 4em 2em}#page article{flex-grow:1;display:flex}#page article>:first-child{margin-top:0;width:100%}#page footer,#page header{display:flex}#page footer>div,#page header>div{flex-grow:1}#page footer p,#page header p{margin:.5em 0 0}#page footer .center,#page header .center{text-align:center}#page footer .right p,#page header .right p{text-align:right}#page header{margin-top:0}#page header.has-content{border-bottom:1px solid #000}#page header.has-content+article>article>div>p:first-child,#page header.has-content+article>div>p:first-child{margin-top:1em}#page footer{margin-bottom:0}#page footer.has-content{border-top:1px solid #000}#page hr{border:none}#page hr:after{content:"* \A0   * \A0   *";display:block;text-align:center}#page .error{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu Cantarell,Helvetica Neue,sans-serif;font-size:80%;background:#fff5f5;color:#c92a2a;padding:.5em;border-left:4px solid #ffa8a8;position:relative;margin-bottom:1em;overflow:auto}#page .error :first-child{margin-top:0}#page .error :last-child{margin-bottom:0}#page .error a{color:#c92a2a}#page .fork p{display:flex;flex-direction:column;width:100%}#page .fork p a{display:block;flex-grow:1;text-align:center;padding:.5em}@media screen and (max-width:768px){#page{margin:0;width:100vw;max-width:100vw;min-height:100vh;padding:1em}}
*{box-sizing:border-box}body{margin:0;padding:0}img{max-width:100%;height:auto}input[type=text],select{padding:.25em}pre{white-space:pre-wrap}tw-storydata{display:none}</style></head><body><form id="cb-validation" action="javascript:void(0)"><button id="cb-validation-tester" hidden></button> <button id="cb-block-enter-key" hidden></button><div id="backdrop"><div id="page" aria-live="polite"><header><div class="left"></div><div class="center"></div><div class="right"></div></header><article></article><footer><div class="left"></div><div class="center"></div><div class="right"></div></footer></div></div></form><tw-storydata name="Welcome to HU" startnode="14" creator="Twine" creator-version="2.2.1" ifid="CE6669AC-43E5-4D3F-86B7-E0067D9FF2DF" zoom="1" format="Chapbook" format-version="0.1.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">













</style><script role="script" id="twine-user-script" type="text/twine-javascript">













</script><tw-passagedata pid="1" name="Day 0" tags="" position="425,250" size="100,100">room: &#39;Day 0: Double Arrival&#39;
config.header.center: &#39;{room}&#39;
--

You arrive at the airport in China late Saturday evening. It has been more than 18 hours since you left home. After clearing immigration and getting your suitcase you enter the arrival hall. Exhausted from the journey and the shift in timezones, you start looking around for a transport that gets you to Harmonious University.

Your colleague had sent you an email to apologise that she couldn&#39;t pick you up from the airport due to last minute obligations.

&quot;No problem&quot;, you replied. &quot;I will find my way to the University.&quot;

To the left you can see a sign that says &quot;[[Buses]]&quot;.
To the right side there is a sign &quot;[[Street Exit]]&quot;.
You can check your [[notes-&gt;Travel Notes]] provided by the University travel agency. 
Another passenger is waiting near you in the hall. Maybe you could [[ask-&gt;Talk to the Passenger]]?
[if returned_to_airport]
A man approaches you. [[&quot;Taxi???-&gt;Wrong Taxi]]
</tw-passagedata><tw-passagedata pid="2" name="Buses" tags="" position="200,75" size="100,100">returned_to_airport: true
--

You take the exit with the sign that points to the bus station.

Outside, the air is warm and dry. You can see a long lines of buses. There are no Taxis around. 

[[Go back-&gt;Day 0]]</tw-passagedata><tw-passagedata pid="3" name="Street Exit" tags="" position="375,425" size="100,100">returned_to_airport: true
--

You leave the airport hall through the street exit. Even at this time, there is a lot of traffic, and many cars are waiting outside but you cannot see a single Taxi.

Your luggage feels more heavy by the minute. 

[[Go back into the Airport-&gt;Day 0]]

</tw-passagedata><tw-passagedata pid="4" name="Call the University" tags="" position="175,575" size="100,100">returned_to_airport: true
--

An automated voice says something in Chinese. Unfortunately your language knowledge so far is limited to 你好 and 谢谢, not really useful in this situation. Right - the notes mentioned that the University would not be available at this time.

&gt; [[Call the Emergency number-&gt;Emergency Call]]
&gt; [[It is not really an emergency. Find another way-&gt;Day 0]]

</tw-passagedata><tw-passagedata pid="5" name="Talk to the Passenger" tags="" position="700,200" size="100,100">You approach the passenger and ask: &quot;Ehm... Excuse me. Do you know where the Taxis are?&quot;

She doesn&#39;t respond, turns away from you and briskly leaves the airport. The encounter leaves you perplexed, did you do something wrong? Was it offensive to ask a stranger? Did she misunderstand you?

Then suddenly a painfully bright light fills the space. You have to [[cover your eyes and you-&gt;Wake Up]]...

</tw-passagedata><tw-passagedata pid="6" name="Wake Up" tags="" position="800,375" size="100,100">You suddenly wake up. The alarm clock seems to have been ringing for some time now.

You realise that you were dreaming and that you are supposed to travel to your partner University today.

You are late for the flight. 

Luckily, you have packed your suitcase already. You rush to the airport and make it just in time. The flight takes long, but you are able to sleep a bit  before you arrive in the morning.

You make your way to the University via the underground without any problem. It was agreed that students will pick you up at the gate. 
[[Arrive-&gt;Day 1: Carry Your Suitcase]]
</tw-passagedata><tw-passagedata pid="7" name="Day 2: Hello Class" tags="" position="1125,125" size="100,100">room: &#39;Day 2: Hello Class&#39;
config.header.center: &#39;{room}&#39;
--

[todo]

#### Literature
&lt;font size=&quot;-1&quot;&gt;
Edwards, V. and Ran, A. (2006) Meeting the needs of Chinese students in British Higher Education. Report from a Sino-British Trust Workshop. Reading: The National Centre for Language &amp; Literacy, University of Reading.
&lt;br&gt;
Heng, T. T. (2018) ‘Different is not deficient: contradicting stereotypes of Chinese international students in US higher education’, Studies in Higher Education, 43(1), pp. 22–36. doi: 10.1080/03075079.2016.1152466.
&lt;br&gt;
Mathias, J., Bruce, M. and Newton, D. P. (2013) ‘Challenging the Western stereotype: do Chinese international foundation students learn by rote?’, Research in Post-Compulsory Education, 18(3), pp. 221–238. doi: 10.1080/13596748.2013.819257.
&lt;br&gt;
Soysal, Y. (2018) In search of excellence - Chinese students on the move. University of Essex.
&lt;/font&gt;
</tw-passagedata><tw-passagedata pid="8" name="Day 3" tags="" position="1350,125" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="9" name="Day 4" tags="" position="1625,125" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="10" name="Day 5" tags="" position="1925,125" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="11" name="Notes" tags="" position="25,25" size="100,100">Story Format: Chapbook 0.2
Twine version: 2.1.0.
</tw-passagedata><tw-passagedata pid="12" name="Wrong Taxi" tags="" position="600,325" size="100,100">room: &#39;Wrong Taxi&#39;
config.header.center: &#39;{room}&#39;
--

You follow the friendly driver outside and enter his car, noticing that it doesn&#39;t look like an official. Anyway, he is helpful with the luggage and you are getting really tired now. 

You must have been sleeping a while when suddenly [[a sharp noise makes you jump-&gt;Wake Up]]...
</tw-passagedata><tw-passagedata pid="13" name="Day 1: Carry Your Suitcase" tags="" position="900,150" size="100,100">room: &#39;Day 1: Let Us Carry Your Suitcase&#39;
config.header.center: &#39;{room}&#39;
--

A group of students are greeting you at the entrance of the university. They tell you that a meeting is scheduled in the afternoon so you will have time to refresh and have a nap if needed. They are showing you into your place. 

One of the student asks to take your suitcase.

&gt; [[You are grateful about the friendly gesture-&gt;First Meeting]]
&gt; [[You are uncomfortable about the idea that students should carry a lecturer&#39;s luggage and insist to take it yourself-&gt;First Meeting]]

</tw-passagedata><tw-passagedata pid="14" name="Preface" tags="" position="375,25" size="200,100">room: &#39;Preface&#39;
config.header.center: &#39;{room}&#39;

read_notes: false
returned_to_airport: false
--
[todo]
remove these remarks

[continue]
__The formative submission covers one day (day 0), the full submission will cover 5 days.__ 

This is an interactive story, a hypertext that you, the reader, are invited to navigate in order to explore different pathways through the narration (it has been debated if the notion of a &quot;player&quot; is more appropriate, or if we should keep speaking of a &quot;reader&quot;). To do so, you can click on underlined words in a passage. They will lead you to other passages. If you have not encountered this kind of text before, it is a good idea to try it out [[now-&gt;Example Passage]].

This contribution is also a reflection of my time as a guest lecturer in Game Arts and Design at Nanjing University of the Arts. However, any similarity to events or persons is coincidental. My goal is not to report on actual events (these reports are part of the source material) but to discuss my personal experience in the context of available literature on topics and concerns in international education. In particular, I will talk about preconceptions and stereotypes about international students and query them through my personal perspective. The first-person perspective of the interactive story invites you as the reader/player to reflect on your own opinions and possibly gain new perspectives by consulting the referenced literature.

Last but not least, the piece is written as an assignment for the Negotiated Study Module of the Postgraduate Certificate in Academic Practice (PGCAP) programme at the University of Plymouth. Therefore, besides the literature, I will add some amount of reflective writing in specific passages that are marked as such. Furthermore, passages may contain remarks that are formatted in _italicized text_. 

With that in mind, let us [[begin-&gt;Day 0]].

_The story is written in [[Twine-&gt;https://twinery.org]]_

#### Literature
&lt;font size=&quot;-1&quot;&gt;
Frasca, G. (2003) ‘Ludologists love stories, too: notes from a debate that never took place.’, in DIGRA Conf. Available at: http://www.ludology.org/articles/frasca_levelUP2003.pdf (Accessed: 23 September 2015).
&lt;br&gt;
Jackson-Mead, K. and Wheeler, J. R. (eds) (2014) IF Theory Reader. JRW Digital Media.
&lt;br&gt;
Straeubig, M. (2018) NUA DAT 401 assignment delivery retrospective. Internal Report. University of Plymouth.
&lt;/font&gt;
</tw-passagedata><tw-passagedata pid="15" name="Example Passage" tags="" position="675,25" size="100,100">room: &#39;Example Passage&#39;
config.header.center: &#39;{room}&#39;
--
Sometimes, links will bring you [[back to the passage where you came from-&gt;Preface]]. Other links may lead you further into the story. You can  start the story from the beginning clicking the ~~Restart~~ button in the footer. </tw-passagedata><tw-passagedata pid="16" name="Travel Notes" tags="" position="225,225" size="100,100">read_notes: true
--

Travel Notes -- please read carefully

Harmonious University has the number 555-421-1290. Monday to Friday 9am to 5pm only.

In extraordinary circumstances assistance is available 555-867-5309.

You can spend £10 per day but remember to keep all your receipts.

[[Call the University-&gt;Call]]</tw-passagedata><tw-passagedata pid="17" name="Call" tags="" position="175,400" size="100,100">You take out your phone but suddenly remember that you don&#39;t have a phone plan for this country. This could come expensive. 

[[Call anyway-&gt;Call the University]]</tw-passagedata><tw-passagedata pid="18" name="Emergency Call" tags="" position="175,725" size="100,100">You dial the emergency number. It takes ages to get through. Then someone picks up the line. Instead of a human voice you hear a loud [[BEEP-BEEP-BEEP-BEEP-BEEP-BEEP-&gt;Wake Up]]</tw-passagedata><tw-passagedata pid="19" name="First Meeting" tags="" position="1050,300" size="100,100">room: &#39;Day 1: First Meeting&#39;
config.header.center: &#39;{room}&#39;
--

[todo]
end of formative

[continue]
__This is the end of the formative submission. The full submission will cover 5 days__ 

#### Literature
&lt;font size=&quot;-1&quot;&gt;
Lewis, R. D. (2006) When cultures collide. Leading across cultures. Boston, MA: Nicholas Brealey International.
&lt;/font&gt;

</tw-passagedata></tw-storydata><script>!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=125)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.set=t.defaults=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.init=function(){var e=(0,l.name)();if(void 0===e)throw new Error("Cannot set up state: the story has no name");d="chapbook-state-"+e},t.reset=m,t.setDefault=function(e,t){var n=b(e);f('Defaulting "'+e+'" to '+JSON.stringify(t)),(0,i.default)(h,e,t),v(window,e),(null===n||void 0===n)&&a.default.emit("state-change",{name:e,value:t,previous:n})},t.setLookup=function(e,t){var n=b(e);f("Adding lookup variable "+e),(0,i.default)(g,e,t),v(window,e),(null===n||void 0===n)&&a.default.emit("state-change",{name:e,value:b(e),previous:n})},t.saveToObject=w,t.restoreFromObject=x,t.canSaveToStorage=_,t.saveToStorage=k,t.canRestoreFromStorage=function(){return _()&&null!==window.localStorage.getItem(d)},t.restoreFromStorage=function(){f("Restoring variables from local storage"),x(JSON.parse(window.localStorage.getItem(d))),f("Restore complete")},t.purgeFromStorage=function(e){e||f("Purging variables from local storage");x(JSON.parse(window.localStorage.getItem(d))),e||f("Purge complete")},t.varNames=function(e){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object.keys(e).reduce(function(o,i){if("object"===r(e[i])&&e[i]&&!Array.isArray(e[i]))t(e[i],n?n+"."+i:i,o);else{var s=n?n+"."+i:i;-1===o.indexOf(s)&&o.push(s)}return o},o)}if(e)return t(h,null,t(p,null)).sort();return t(p).sort()};var o=c(n(114)),i=c(n(113)),s=c(n(111)),a=c(n(1)),u=c(n(6)),l=n(5);function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,u.default)("state").log,d=void 0,p={},h={},g={};function v(e,t){if(!(0,o.default)(e,t)){for(var n=t.split("."),r=n[n.length-1],i=0;i<n.length-1;i++)e[n[i]]=e[n[i]]||{},e=e[n[i]];Object.defineProperty(e,r,{get:function(){return b(t)},set:function(e){y(t,e)},configurable:!0})}}function m(){!function e(t,n){Object.keys(t).forEach(function(o){var i=""===n?o:n+"."+o;if("object"!==r(t[o])||Array.isArray(t[o])){var u=t[o];delete t[o],function(e,t){(0,s.default)(e,t)}(window,n),a.default.emit("state-change",{name:i,value:b(i),previous:u})}else e(t[o],i)})}(p,""),a.default.emit("state-reset"),b("config.state.autosave")&&k()}function y(e,t){var n=b(e);(0,i.default)(p,e,t),v(window,e),b(e)!==n&&a.default.emit("state-change",{name:e,value:b(e),previous:n}),b("config.state.autosave")&&k()}function b(e){var t=(0,o.default)(g,e);if(t)return t(b,y);var n=(0,o.default)(p,e);return void 0===n||null===n?(0,o.default)(h,e):n}function w(){return Object.assign({},p)}function x(e){m(),Object.keys(e).forEach(function(t){return y(t,e[t])})}function _(){try{return window.localStorage.setItem("chapbook-test","a"),window.localStorage.removeItem("chapbook-test"),!0}catch(e){return!1}}function k(){f("Saving to local storage: "+JSON.stringify(w())),window.localStorage.setItem(d,JSON.stringify(w())),f("Save complete")}t.defaults={"config.state.autosave":!0},t.set=y,t.get=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(123));t.default=(0,r.default)()},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";n.r(t),n.d(t,"h",function(){return s}),n.d(t,"createElement",function(){return s}),n.d(t,"cloneElement",function(){return l}),n.d(t,"Component",function(){return $}),n.d(t,"render",function(){return q}),n.d(t,"rerender",function(){return p}),n.d(t,"options",function(){return r});var r={},o=[],i=[];function s(e,t){var n,s,a,u,l=i;for(u=arguments.length;u-- >2;)o.push(arguments[u]);for(t&&null!=t.children&&(o.length||o.push(t.children),delete t.children);o.length;)if((s=o.pop())&&void 0!==s.pop)for(u=s.length;u--;)o.push(s[u]);else"boolean"==typeof s&&(s=null),(a="function"!=typeof e)&&(null==s?s="":"number"==typeof s?s=String(s):"string"!=typeof s&&(a=!1)),a&&n?l[l.length-1]+=s:l===i?l=[s]:l.push(s),n=a;var c=new function(){};return c.nodeName=e,c.children=l,c.attributes=null==t?void 0:t,c.key=null==t?void 0:t.key,void 0!==r.vnode&&r.vnode(c),c}function a(e,t){for(var n in t)e[n]=t[n];return e}var u="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function l(e,t){return s(e.nodeName,a(a({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var c=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,f=[];function d(e){!e._dirty&&(e._dirty=!0)&&1==f.push(e)&&(r.debounceRendering||u)(p)}function p(){var e,t=f;for(f=[];e=t.pop();)e._dirty&&A(e)}function h(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&g(e,t.nodeName):n||e._componentConstructor===t.nodeName}function g(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function v(e){var t=a({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function m(e){var t=e.parentNode;t&&t.removeChild(e)}function y(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"==typeof r[i]&&!1===c.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,b,s):e.removeEventListener(t,b,s),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e)!function(e,t,n){try{e[t]=n}catch(e){}}(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var a=o&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function b(e){return this._listeners[e.type](r.event&&r.event(e)||e)}var w=[],x=0,_=!1,k=!1;function S(){for(var e;e=w.pop();)r.afterMount&&r.afterMount(e),e.componentDidMount&&e.componentDidMount()}function O(e,t,n,r,o,i){x++||(_=null!=o&&void 0!==o.ownerSVGElement,k=null!=e&&!("__preactattr_"in e));var s=j(e,t,n,r,i);return o&&s.parentNode!==o&&o.appendChild(s),--x||(k=!1,i||S()),s}function j(e,t,n,r,o){var i=e,s=_;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),C(e,!0))),i.__preactattr_=!0,i;var a=t.nodeName;if("function"==typeof a)return function(e,t,n,r){var o=e&&e._component,i=o,s=e,a=o&&e._componentConstructor===t.nodeName,u=a,l=v(t);for(;o&&!u&&(o=o._parentComponent);)u=o.constructor===t.nodeName;o&&u&&(!r||o._component)?(N(o,l,3,n,r),e=o.base):(i&&!a&&(T(i),e=s=null),o=L(t.nodeName,l,n),e&&!o.nextBase&&(o.nextBase=e,s=null),N(o,l,1,n,r),e=o.base,s&&e!==s&&(s._component=null,C(s,!1)));return e}(e,t,n,r);if(_="svg"===a||"foreignObject"!==a&&_,a=String(a),(!e||!g(e,a))&&(i=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(a,_),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),C(e,!0)}var u=i.firstChild,l=i.__preactattr_,c=t.children;if(null==l){l=i.__preactattr_={};for(var f=i.attributes,d=f.length;d--;)l[f[d].name]=f[d].value}return!k&&c&&1===c.length&&"string"==typeof c[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=c[0]&&(u.nodeValue=c[0]):(c&&c.length||null!=u)&&function(e,t,n,r,o){var i,s,a,u,l,c=e.childNodes,f=[],d={},p=0,g=0,v=c.length,y=0,b=t?t.length:0;if(0!==v)for(var w=0;w<v;w++){var x=c[w],_=x.__preactattr_,k=b&&_?x._component?x._component.__key:_.key:null;null!=k?(p++,d[k]=x):(_||(void 0!==x.splitText?!o||x.nodeValue.trim():o))&&(f[y++]=x)}if(0!==b)for(var w=0;w<b;w++){u=t[w],l=null;var k=u.key;if(null!=k)p&&void 0!==d[k]&&(l=d[k],d[k]=void 0,p--);else if(!l&&g<y)for(i=g;i<y;i++)if(void 0!==f[i]&&h(s=f[i],u,o)){l=s,f[i]=void 0,i===y-1&&y--,i===g&&g++;break}l=j(l,u,n,r),a=c[w],l&&l!==e&&l!==a&&(null==a?e.appendChild(l):l===a.nextSibling?m(a):e.insertBefore(l,a))}if(p)for(var w in d)void 0!==d[w]&&C(d[w],!1);for(;g<=y;)void 0!==(l=f[y--])&&C(l,!1)}(i,c,n,r,k||null!=l.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||y(e,r,n[r],n[r]=void 0,_);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||y(e,r,n[r],n[r]=t[r],_)}(i,t.attributes,l),_=s,i}function C(e,t){var n=e._component;n?T(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||m(e),M(e))}function M(e){for(e=e.lastChild;e;){var t=e.previousSibling;C(e,!0),e=t}}var E={};function L(e,t,n){var r,o=E[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),$.call(r,t,n)):((r=new $(t,n)).constructor=e,r.render=P),o)for(var i=o.length;i--;)if(o[i].constructor===e){r.nextBase=o[i].nextBase,o.splice(i,1);break}return r}function P(e,t,n){return this.constructor(e,n)}function N(e,t,n,o,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===r.syncComponentUpdates&&e.base?d(e):A(e,1,i)),e.__ref&&e.__ref(e))}function A(e,t,n,o){if(!e._disable){var i,s,u,l=e.props,c=e.state,f=e.context,d=e.prevProps||l,p=e.prevState||c,h=e.prevContext||f,g=e.base,m=e.nextBase,y=g||m,b=e._component,_=!1;if(g&&(e.props=d,e.state=p,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(l,c,f)?_=!0:e.componentWillUpdate&&e.componentWillUpdate(l,c,f),e.props=l,e.state=c,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!_){i=e.render(l,c,f),e.getChildContext&&(f=a(a({},f),e.getChildContext()));var k,j,M=i&&i.nodeName;if("function"==typeof M){var E=v(i);(s=b)&&s.constructor===M&&E.key==s.__key?N(s,E,1,f,!1):(k=s,e._component=s=L(M,E,f),s.nextBase=s.nextBase||m,s._parentComponent=e,N(s,E,0,f,!1),A(s,1,n,!0)),j=s.base}else u=y,(k=b)&&(u=e._component=null),(y||1===t)&&(u&&(u._component=null),j=O(u,i,f,n||!g,y&&y.parentNode,!0));if(y&&j!==y&&s!==b){var P=y.parentNode;P&&j!==P&&(P.replaceChild(j,y),k||(y._component=null,C(y,!1)))}if(k&&T(k),e.base=j,j&&!o){for(var $=e,q=e;q=q._parentComponent;)($=q).base=j;j._component=$,j._componentConstructor=$.constructor}}if(!g||n?w.unshift(e):_||(e.componentDidUpdate&&e.componentDidUpdate(d,p,h),r.afterUpdate&&r.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);x||o||S()}}function T(e){r.beforeUnmount&&r.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?T(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,m(t),function(e){var t=e.constructor.name;(E[t]||(E[t]=[])).push(e)}(e),M(t)),e.__ref&&e.__ref(null)}function $(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function q(e,t,n){return O(n,e,{},!1,t,!1)}a($.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=a({},n)),a(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),d(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),A(this,2)},render:function(){}});var D={h:s,createElement:s,cloneElement:l,Component:$,render:q,rerender:p,options:r};t.default=D},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=document.createElement(e);return Object.keys(t).forEach(function(e){return r.setAttribute(e,t[e])}),n.forEach(function(e){"string"==typeof e?r.appendChild(document.createTextNode(e)):r.appendChild(e)}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.domify=r,t.default=function(){return r.apply(void 0,arguments).outerHTML}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFromData=function(e){["name","creator","ifid","options"].forEach(function(t){return a[t]=e.getAttribute(t)}),a.startNode=parseInt(e.getAttribute("startnode")),a.creatorVersion=e.getAttribute("creator-version");var t=function(e){return e.map(function(e){return e.textContent})};a.customScripts=t((0,o.selectAll)(e,'[type="text/twine-javascript"]')),a.customStyles=t((0,o.selectAll)(e,'[type="text/twine-css"]')),u=(0,o.selectAll)(e,"tw-passagedata").map(function(e){var t={id:parseInt(e.getAttribute("pid")),name:e.getAttribute("name"),source:e.textContent},n=e.getAttribute("tags");return n&&(t.tags=n.split(" ")),t}),!0},t.init=function(){(0,i.setDefault)("trail",[l().name]),(0,i.setDefault)("config.testing","string"==typeof a.options&&-1!==a.options.indexOf("debug")||!1),document.title=a.name},t.runCustomScripts=function(){s.log("Running custom scripts ("+a.customScripts.length+")"),a.customScripts.forEach(function(e){new Function(e).apply(window)})},t.addCustomStyles=function(){s.log("Adding custom styles ("+a.customStyles.length+")"),a.customStyles.forEach(function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)})},t.name=function(){return a.name},t.startPassage=l,t.passageNamed=function(e){return u.find(function(t){return t.name===e})},t.passageWithId=function(e){return u.find(function(t){return t.id===e})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),o=n(24),i=n(0);var s=(0,r.default)("story"),a={customScripts:[],customStyles:[]},u=[];function l(){return u.find(function(e){return e.id===a.startNode})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warn=t.log=t.defaults=void 0,t.default=function(e){return{log:function(t){u(e,t)},warn:function(t){l(e,t)}}};var r=s(n(105)),o=s(n(1)),i=n(0);function s(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.logger.show.parse":!1,"config.logger.show.render":!1,"config.logger.show.state":!0,"config.logger.show.story":!0,"config.logger.show.style":!0};function a(e){return(0,r.default)(e,10)+" │ "}function u(e,t){(0,i.get)("config.logger.show."+e)&&console.log(a(e)+t),o.default.emit("log",{source:e,message:t})}function l(e,t){console.warn(a(e)+t),o.default.emit("log-warning",{source:e,message:t})}t.log=u,t.warn=l,window.logger={log:u,warn:l}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);n(101);t.default=class extends r.Component{constructor(e){super(e),this.state={open:void 0===this.props.initiallyOpen||this.props.initiallyOpen}}toggle(){this.setState({open:!this.state.open})}render(){return(0,r.h)("div",{class:"panel"+(this.state.open?" open":"")},(0,r.h)("h2",null,(0,r.h)("button",{onClick:()=>this.toggle()},this.props.title)),this.state.open&&(0,r.h)("div",{class:"content"},this.props.children))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.render=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,s.default)((0,i.default)(e),(0,a.get)("config.template.inserts")||[],(0,a.get)("config.template.modifiers")||[],t)};var r=u(n(64)),o=u(n(51)),i=u(n(44)),s=u(n(42)),a=n(0);function u(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.template.inserts":r.default,"config.template.modifiers":o.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.init=function(){(0,a.init)(),f=document.querySelector("#page article"),d={},["header","footer"].forEach(function(e){d[e]={container:document.querySelector("#page "+e)},["left","center","right"].forEach(function(t){d[e][t]=document.querySelector("#page "+e+" ."+t)})}),o.default.on("state-change",function(e){var t=e.name;e.value;return g("trail"===t)}),["change","click"].forEach(function(e){document.body.addEventListener(e,function(e){for(var t=e.target;t;)t.dataset&&Object.keys(t.dataset).some(function(e){return/^cb[A-Z]/.test(e)})&&o.default.emit("dom-"+e.type,t),t=t.parentNode})})},t.changeBody=function(e){var t={x:window.scrollX,y:window.scrollY},n=f.innerHTML,r=document.createElement("div");for(;f.firstChild;)r.insertBefore(f.firstChild,r.firstChild);f.innerHTML=n,e(r),window.scrollX=t.x,window.scrollY=t.y,h(f,r.innerHTML,(0,s.get)("config.body.transition.name"),(0,s.get)("config.body.transition.duration"))};var r=c(n(21)),o=c(n(1)),i=n(70),s=n(0),a=n(67),u=n(5),l=n(10);function c(e){return e&&e.__esModule?e:{default:e}}n(38);var f=void 0,d=void 0,p={crossfade:i.crossfade,fadeInOut:i.fadeInOut,none:i.none};t.defaults={"config.body.transition.name":"crossfade","config.body.transition.duration":"500ms","config.header.left":"","config.header.center":"","config.header.right":"","config.header.transition.name":"none","config.header.transition.duration":"500ms","config.footer.left":"_{story.name}_","config.footer.center":"","config.footer.right":"{restart link}","config.footer.transition.name":"none","config.footer.transition.duration":"500ms"};function h(e,t,n,r){p[n]?p[n](e,t,r):p.none(e,t)}var g=(0,r.default)(function(e){if(e.some(function(e){return e[0]})){var t=(0,s.get)("trail"),n=(0,u.passageNamed)(t[t.length-1]);if(!n)throw new Error('There is no passage named "'+t[t.length-1]+'".');h(f,(0,l.render)(n.source),(0,s.get)("config.body.transition.name"),(0,s.get)("config.body.transition.duration"))}["header","footer"].forEach(function(e){d[e].container.classList.remove("has-content"),["left","center","right"].forEach(function(t){var n=(0,l.render)((0,s.get)("config."+e+"."+t));""!==n&&d[e].container.classList.add("has-content"),h(d[e][t],n,(0,s.get)("config."+e+".transition.name"),(0,s.get)("config."+e+".transition.duration"))})})})},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderLink=o,t.default=function(e){return e.replace(/\[\[(.*?)\]\]/g,function(e,t){var n=t,r=t.indexOf("|");if(-1!==r)n=t.substr(0,r),t=t.substr(r+1);else{var i=t.indexOf("->");if(-1!==i)n=t.substr(0,i),t=t.substr(i+2);else{var s=t.indexOf("<-");-1!==s&&(n=t.substr(s+2),t=t.substr(0,s))}}return o(t,n||t)})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(4));function o(e,t){return/^\w+:\/\/\/?\w/i.test(e)?(0,r.default)("a",{href:e},[t||e]):(0,r.default)("a",{href:"javascript:void(0)","data-cb-go":e},[t||e])}},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t){e.exports=function(e,t,n){return Math.min(Math.max(e,t),n)}},function(e,t){var n=/-?\d+(\.\d+)?%?/g;e.exports=function(e){return e.match(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.style=p,t.init=function(){document.head.appendChild(c),document.body.appendChild(f),document.body.appendChild(d),o.default.on("state-change",function(e){var t=e.name,n=e.value;switch(t){case"config.style.backdrop":return u("Setting backdrop color"),void p("#backdrop",{"background-color":(0,s.parseColor)(n).color});case"config.style.googleFont":return u("Adding Google Font"),void(f.innerHTML=n);case"config.style.typekitFont":return u("Adding Typekit Font"),void(d.innerHTML=n);case"config.style.page.fork.divider.color":return u("Setting fork divider color"),void p("#page .fork p a + a",{"border-top-color":(0,s.parseColor)(n).color});case"config.style.page.fork.divider.size":return u("Setting fork divider size"),void p("#page .fork p a + a",{"border-top-width":n+"px"});case"config.style.page.fork.divider.style":return u("Setting fork divider style"),void p("#page .fork p a + a",{"border-top-style":n});case"config.style.page.style":case"config.style.page.style.borderColor":switch(u("Setting page style"),(0,i.get)("config.style.page.style")){case"none":p("#page",{border:"none","box-shadow":"none"});break;case"shadow":p("#page",{border:"none","box-shadow":"0 4px 8px hsla(0, 0%, 0%, 0.25)"});break;case"thick-line":p("#page",{border:"4px solid "+(0,s.parseColor)((0,i.get)("config.style.page.style.borderColor")).color,"box-shadow":"none"});break;case"thin-line":p("#page",{border:"1px solid "+(0,s.parseColor)((0,i.get)("config.style.page.style.borderColor")).color,"box-shadow":"none"})}return;case"config.style.page.verticalAlign":switch(u("Setting page vertical alignment"),(0,i.get)("config.style.page.verticalAlign")){case"top":p("#page article",{"align-items":"flex-start"});break;case"center":p("#page article",{"align-items":"center"});break;case"bottom":p("#page article",{"align-items":"flex-end"})}return}if(/^config\.style\.page\./i.test(t)){var r="#page",o=t.replace(/^config\.style\.page\./i,"").split(".");switch("header"===o[0].toLowerCase()?(r+=" header",o.shift()):"footer"===o[0].toLowerCase()&&(r+=" footer",o.shift()),"link"===o[0].toLowerCase()&&(r+=" a",o.shift()),"active"===o[0].toLowerCase()&&(r=r+":hover, "+r+":active",o.shift()),o[0].toLowerCase()){case"color":u("Setting color for "+r),p(r,(0,s.parseColor)(n));break;case"linecolor":u("Setting line color for "+r);var a=(0,s.parseColor)(n).color;p(r,{"text-decoration-color":a,"-webkit-text-decoration-color":a});break;case"font":u("Setting font for "+r),p(r,(0,s.parseFont)(n))}"font"===o[0].toLowerCase()||o[0].toLowerCase()}})};var r=a(n(6)),o=a(n(1)),i=n(0),s=n(36);function a(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.default)("style").log,l=(t.defaults={"config.style.backdrop":"gray-0","config.style.page.style":"shadow","config.style.page.font":"Iowan Old Style/Constantia/Georgia/serif 18","config.style.page.color":"gray-9 on white","config.style.page.fork.divider.color":"gray-3","config.style.page.fork.divider.style":"dashed","config.style.page.fork.divider.size":1,"config.style.page.link.color":"gray-9","config.style.page.link.lineColor":"red-8","config.style.page.link.font":"underline","config.style.page.link.active.color":"red-8 on red-0","config.style.page.verticalAlign":"center","config.style.page.header.font":"16","config.style.page.header.link.font":"small caps","config.style.page.footer.font":"16","config.style.page.footer.link.font":"small caps"},{}),c=document.createElement("style"),f=document.createElement("div"),d=document.createElement("div");function p(e,t){l[e]=l[e]||{},Object.assign(l[e],t),function(){c.innerHTML=Object.keys(l).reduce(function(e,t){return e+function(e,t){return e+"{"+Object.keys(t).sort().reduce(function(e,n){return e+n+":"+t[n].toString()+";"},"")+"}"}(t,l[t])},"")}()}},function(e,t,n){(function(t){(function(){var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:c,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:c,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:c,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links={},this.options=e||d.defaults,this.rules=t.normal,this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t.bullet=/(?:[*+-]|\d+\.)/,t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,t.item=u(t.item,"gm")(/bull/g,t.bullet)(),t.list=u(t.list)(/bull/g,t.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+t.def.source+")")(),t._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",t.html=u(t.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,t._tag)(),t.paragraph=u(t.paragraph)("hr",t.hr)("heading",t.heading)("lheading",t.lheading)("blockquote",t.blockquote)("tag","<"+t._tag)("def",t.def)(),t.normal=f({},t),t.gfm=f({},t.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),t.gfm.paragraph=u(t.paragraph)("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|")(),t.tables=f({},t.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),n.rules=t,n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,n,r){var o,i,s,a,u,l,c,f,d;for(e=e.replace(/^ +$/gm,"");e;)if((s=this.rules.newline.exec(e))&&(e=e.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(e))e=e.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});else if(s=this.rules.heading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(n&&(s=this.rules.nptable.exec(e))){for(e=e.substring(s[0].length),l={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")},f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=l.cells[f].split(/ *\| */);this.tokens.push(l)}else if(s=this.rules.lheading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(s=this.rules.hr.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,n,!0),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(e)){for(e=e.substring(s[0].length),a=s[2],this.tokens.push({type:"list_start",ordered:a.length>1}),o=!1,d=(s=s[0].match(this.rules.item)).length,f=0;f<d;f++)c=(l=s[f]).length,~(l=l.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&f!==d-1&&(a===(u=t.bullet.exec(s[f+1])[0])||a.length>1&&u.length>1||(e=s.slice(f+1).join("\n")+e,f=d-1)),i=o||/\n\n(?!\s*$)/.test(l),f!==d-1&&(o="\n"===l.charAt(l.length-1),i||(i=o)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(l,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(e))e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(!r&&n&&(s=this.rules.def.exec(e)))e=e.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};else if(n&&(s=this.rules.table.exec(e))){for(e=e.substring(s[0].length),l={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")},f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=l.cells[f].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(n&&(s=this.rules.paragraph.exec(e)))e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var r={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:c,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:c,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function o(e,t){if(this.options=t||d.defaults,this.links=e,this.rules=r.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=r.breaks:this.rules=r.gfm:this.options.pedantic&&(this.rules=r.pedantic)}function i(e){this.options=e||{}}function s(e){this.tokens=[],this.token=null,this.options=e||d.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function u(e,t){return e=e.source,t=t||"",function n(r,o){return r?(o=(o=o.source||o).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,o),n):new RegExp(e,t)}}function l(e,t){return baseUrls[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?baseUrls[" "+e]=e+"/":baseUrls[" "+e]=e.replace(/[^/]*$/,"")),e=baseUrls[" "+e],"//"===t.slice(0,2)?e.replace(/:[^]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[^]*/,"$1")+t:e+t}function c(){}function f(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function d(e,t,r){if(r||"function"==typeof t){r||(r=t,t=null);var o,i,u=(t=f({},d.defaults,t||{})).highlight,l=0;try{o=n.lex(e,t)}catch(e){return r(e)}i=o.length;var c=function(e){if(e)return t.highlight=u,r(e);var n;try{n=s.parse(o,t)}catch(t){e=t}return t.highlight=u,e?r(e):r(null,n)};if(!u||u.length<3)return c();if(delete t.highlight,!i)return c();for(;l<o.length;l++)!function(e){"code"!==e.type?--i||c():u(e.text,e.lang,function(t,n){return t?c(t):null==n||n===e.text?--i||c():(e.text=n,e.escaped=!0,void(--i||c()))})}(o[l])}else try{return t&&(t=f({},d.defaults,t)),s.parse(n.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(t||d.defaults).silent)return"<p>An error occured:</p><pre>"+a(e.message+"",!0)+"</pre>";throw e}}r._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,r._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,r.link=u(r.link)("inside",r._inside)("href",r._href)(),r.reflink=u(r.reflink)("inside",r._inside)(),r.normal=f({},r),r.pedantic=f({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),r.gfm=f({},r.normal,{escape:u(r.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:u(r.text)("]|","~]|")("|","|https?://|")()}),r.breaks=f({},r.gfm,{br:u(r.br)("{2,}","*")(),text:u(r.gfm.text)("{2,}","*")()}),o.rules=r,o.output=function(e,t,n){return new o(t,n).output(e)},o.prototype.output=function(e){for(var t,n,r,o,i="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),i+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),"@"===o[2]?(n=a(":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1])),r=this.mangle("mailto:")+n):r=n=a(o[1]),i+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),i+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):a(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,i+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){i+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,i+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),i+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),i+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),i+=this.renderer.codespan(a(o[2].trim(),!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),i+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),i+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),i+=this.renderer.text(a(this.smartypants(o[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(o[0].length),r=n=a(o[1]),i+=this.renderer.link(r,null,n);return i},o.prototype.outputLink=function(e,t){var n=a(t.href),r=t.title?a(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,a(e[1]))},o.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},o.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,o=0;o<r;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},i.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+a(t,!0)+'">'+(n?e:a(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:a(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(function(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return""}this.options.baseUrl&&!originIndependentUrl.test(e)&&(e=l(this.options.baseUrl,e));var o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>"},i.prototype.image=function(e,t,n){this.options.baseUrl&&!originIndependentUrl.test(e)&&(e=l(this.options.baseUrl,e));var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},s.parse=function(e,t,n){return new s(t,n).parse(e)},s.prototype.parse=function(e){this.inline=new o(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},s.prototype.next=function(){return this.token=this.tokens.pop()},s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},s.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},s.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,o="",i="";for(n="",e=0;e<this.token.header.length;e++)({header:!0,align:this.token.align[e]}),n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(n)}return this.renderer.table(o,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var s=this.token.ordered;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,s);case"list_item_start":for(i="";"list_item_end"!==this.next().type;)i+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(i);case"loose_item_start":for(i="";"list_item_end"!==this.next().type;)i+=this.tok();return this.renderer.listitem(i);case"html":var a=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(a);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},baseUrls={},originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,c.exec=c,d.options=d.setOptions=function(e){return f(d.defaults,e),d},d.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1,baseUrl:null},d.Parser=s,d.parser=s.parse,d.Renderer=i,d.Lexer=n,d.lexer=n.lex,d.InlineLexer=o,d.inlineLexer=o.output,d.parse=d,e.exports=d}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(this,n(12))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="<span"+Object.keys(t).reduce(function(e,n){return e+" "+n+'="'+t[n]+'"'},"")+">",r=n+e.replace(/[\r\n]{2,}/g,"</span>$&"+n)+"</span>";return r=r.replace(/(<span.*?>)\s*(#+)/gi,"$2 $1")}},function(e,t,n){"use strict";e.exports=function(e,t,n){let o=0,s=function(e){let t={ms:.001,s:1,m:60,h:3600};return t.d=e.hoursPerDay*t.h,t.w=e.daysPerWeek*t.d,t.mth=e.daysPerYear/e.monthsPerYear*t.d,t.y=e.daysPerYear*t.d,t}(n=Object.assign({},r,n||{})),a=e.toLowerCase().replace(/[^.\w+-]+/g,"").match(/[-+]?[0-9]+[a-z]+/g);null!==a&&a.forEach(e=>{let t=e.match(/[0-9]+/g)[0],n=e.match(/[a-z]+/g)[0];o+=function(e,t,n){return e*n[i(t)]}(t,n,s)});if(t)return function(e,t,n){return e/n[i(t)]}(o,t,s);return o};const r={hoursPerDay:24,daysPerWeek:7,weeksPerMonth:4,monthsPerYear:12,daysPerYear:365.25},o={ms:["ms","milli","millisecond","milliseconds"],s:["s","sec","secs","second","seconds"],m:["m","min","mins","minute","minutes"],h:["h","hr","hrs","hour","hours"],d:["d","day","days"],w:["w","week","weeks"],mth:["mon","mth","mths","month","months"],y:["y","yr","yrs","year","years"]};function i(e){for(let t of Object.keys(o))if(o[t].indexOf(e)>-1)return t;throw new Error(`The unit [${e}] is not supported by timestring`)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=!1;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n||(n=!0,Promise.resolve().then(function(){try{e(t)}catch(e){window.setTimeout(function(){throw e},0)}t=[],n=!1})),t.push(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.default=function(e){e("random.coinFlip",function(){var e=u();return(0,o.default)(l),e>.5}),e("random.fraction",function(){var e=u();return(0,o.default)(l),e}),[4,5,6,8,10,12,20,25,50,100,1e3].forEach(function(t){e("random.d"+t,function(){var e=1+Math.round(u()*(t-1));return(0,o.default)(l),e})})};var r=a(n(81)),o=a(n(21)),i=a(n(1)),s=n(0);n(5);function a(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.random.seed":function(){return new Date},"config.random.privateState":null};var u=(0,r.default)(new Date,{state:!0});function l(){(0,s.set)("config.random.privateState",u.state())}i.default.on("state-change",function(e){var t=e.name,n=e.value;"config.random.seed"===t&&(u=(0,r.default)(n,{state:!0}))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.history=t.defaults=void 0,t.rewindTo=function(e){if(!i[e])throw new Error("There is no history at index "+e+" to rewind to.");(0,o.restoreFromObject)(i[e].state)},t.init=function(){r.default.on("state-change",a),r.default.on("state-reset",s)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o=n(0);t.defaults={"config.backstage.trail.maxLength":100};var i=t.history=[];function s(){t.history=i=[]}function a(e){var t=e.name,n=e.value;i.length===(0,o.get)("config.backstage.trail.maxLength")&&i.shift(),i.push({change:{name:t,value:n},state:(0,o.saveToObject)()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t){return e.querySelector(t)},t.selectAll=function(e,t){return Array.from(e.querySelectorAll(t))}},function(e,t){function n(e,t){if(!e)throw new Error(t||"AssertionError")}n.notEqual=function(e,t,r){n(e!=t,r)},n.notOk=function(e,t){n(!e,t)},n.equal=function(e,t,r){n(e==t,r)},n.ok=n,e.exports=n},,function(e,t,n){},function(e,t){e.exports=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,s=Math.min(r,o,i),a=Math.max(r,o,i),u=a-s;return a==s?t=0:r==a?t=(o-i)/u:o==a?t=2+(i-r)/u:i==a&&(t=4+(r-o)/u),(t=Math.min(60*t,360))<0&&(t+=360),n=(s+a)/2,[t,100*(a==s?0:n<=.5?u/(a+s):u/(2-a-s)),100*n]}},function(e,t){e.exports=function(e){var t,n,r,o,i,s=e[0]/360,a=e[1]/100,u=e[2]/100;if(0==a)return[i=255*u,i,i];t=2*u-(n=u<.5?u*(1+a):u+a-u*a),o=[0,0,0];for(var l=0;l<3;l++)(r=s+1/3*-(l-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,o[l]=255*i;return o}},function(e,t,n){var r=n(16),o=n(15);function i(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*o(parseInt(e,10),0,100)/100):o(parseInt(e,10),0,255):o(parseFloat(e),0,1)}e.exports=function(e){return r(e).map(i)}},function(e,t){e.exports=function(e){4!==e.length&&5!==e.length||(e=function(e){for(var t="#",n=1;n<e.length;n++){var r=e.charAt(n);t+=r+r}return t}(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var n=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(n)}return t}},function(e,t,n){var r=n(16),o=n(15);function i(e,t){switch(e=parseFloat(e),t){case 0:return o(e,0,360);case 1:case 2:return o(e,0,100);case 3:return o(e,0,1)}}e.exports=function(e){return r(e).map(i)}},function(e,t,n){var r=n(32),o=n(31),i=n(30),s=n(29);var a={"#":o,hsl:function(e){var t=r(e),n=s(t);return 4===t.length&&n.push(t[3]),n},rgb:i};function u(e){for(var t in a)if(0===e.indexOf(t))return a[t](e)}u.rgb=i,u.hsl=r,u.hex=o,e.exports=u},function(e){e.exports={white:"#ffffff",black:"#000000",gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=a,t.format=function(e){return"hsla("+(e="string"==typeof e?a(e):e)[0]+", "+e[1]+"%, "+e[2]+"%, "+(e[3]||1)+")"};var r=s(n(34)),o=s(n(33)),i=s(n(28));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){if("string"!=typeof e)throw new Error("Only strings can be parsed as colors.");r.default[e]&&(e=Array.isArray(r.default[e])?r.default[e][r.default[e].length-1]:r.default[e]);var t=/^(\w+)-(\d)$/.exec(e);t&&r.default[t[1]]&&(e=r.default[t[1]][t[2]]);var n=(0,o.default)(e),s=(0,i.default)(n);return s[3]=void 0!==n[3]?n[3]:1,s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autopx=function(e){if("number"==typeof e)return e+"px";return e},t.parseColor=function(e){var t={color:"inherit","background-color":"inherit"},n=e.split(/ on /i);t.color=(0,r.format)(n[0].trim().toLowerCase()),2===n.length&&(t["background-color"]=(0,r.format)(n[1].trim().toLowerCase()));return t},t.parseFont=function(e){var t={"font-family":"inherit","font-size":"inherit","font-style":"inherit","font-weight":"inherit","letter-spacing":"inherit","text-decoration":"inherit","text-transform":"inherit"};function n(e,t){e["font-family"]=t.split("/").map(function(e){var t=e;return'"'!==t[0]&&(t='"'+t),'"'!==t[t.length-1]&&(t+='"'),t}).join(",")}function r(e){e["font-weight"]="bold"}function o(e){e["font-style"]="italic"}function i(e){e["font-style"]="none",e["font-weight"]="normal",e["letter-spacing"]="normal",e["text-decoration"]="none",e["text-transform"]="none"}function s(e){e["letter-spacing"]="0.075em",e["text-transform"]="uppercase",e["font-size"]&&"inherit"!==e["font-size"]?e["font-size"]="calc(0.7 * "+e["font-size"]+")":e["font-size"]="70%"}function a(e){e["text-decoration"]="underline"}var u=/\b\d+(ch|cm|ex|in|mm|pc|pt|px|r?em|vh|vmax|vmin|vw|%)?/i.exec(e);if(u){/^\d+$/.test(u[0])?t["font-size"]=u[0]+"px":t["font-size"]=u[0],0!==u.index&&n(t,e.substr(0,u.index).trim());var l=e.substr(u.index);/\bregular\b/i.test(l)?(t["font-style"]="none",t["font-weight"]="normal",t["letter-spacing"]="normal",t["text-decoration"]="none",t["text-transform"]="none"):(/\bbold\b/.test(l)&&r(t),/\bitalics?\b/.test(l)&&o(t),/\bunderlined?/.test(l)&&a(t),/\bsmall caps?\b/.test(l)&&s(t))}else{for(var c=void 0,f=e;c=/(bold|italics?|regular|small caps|underlined?)$/.exec(f);){switch(c[0]){case"bold":r(t);break;case"italic":case"italics":o(t);break;case"regular":i(t);break;case"small caps":s(t);break;case"underline":case"underlined":a(t)}f=f.substr(0,c.index).trim()}""!==f.trim()&&n(t,f)}return t};var r=n(35)},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="",r=0,i=e.indexOf("{");if(-1===i)return e;for(var s=!1,a=void 0,u=i+1;u<e.length;u++)switch(e[u]){case"{":i=u,s=!1;break;case'"':case"'":s?s&&a===e[u]&&(s=!1):(s=!0,a=e[u]);break;case"}":s||(n+=e.substring(r,i)+o(e.substring(i,u+1),t),r=u+1,-1===(i=e.indexOf("{",r))&&(u=e.index))}return n+e.substring(r)};var r=n(0);function o(e,t){var n=e.substr(1,e.length-2).trim();if(/\s/.test(n)){var o=n.match(/^[^:,]+/)[0],i=t.find(function(e){return e.match.test(o)});if(i){var s=n.replace(o,"");if(":"===s[0]){var a=new Function('return {"'+o+'" '+s+"}")(),u=a[o];return delete a[o],i.render(u,a,n)}if(","===s[0]){var l=new Function("return {"+s.substr(1)+"}")();return i.render(null,l,n)}if(""===s)return i.render(null,{},n)}}else{var c=(0,r.get)(n);if(void 0!==c)return c}return e}},function(e,t,n){(function(t){var n=1/0,r="[object Symbol]",o=/&(?:amp|lt|gt|quot|#39|#96);/g,i=RegExp(o.source),s="object"==typeof t&&t&&t.Object===Object&&t,a="object"==typeof self&&self&&self.Object===Object&&self,u=s||a||Function("return this")();var l=function(e){return function(t){return null==e?void 0:e[t]}}({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"}),c=Object.prototype.toString,f=u.Symbol,d=f?f.prototype:void 0,p=d?d.toString:void 0;function h(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&c.call(e)==r}(e))return p?p.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=function(e){return(e=function(e){return null==e?"":h(e)}(e))&&i.test(e)?e.replace(o,l):e}}).call(this,n(12))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(18)),o=s(n(40)),i=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var a=new r.default.Renderer;Object.assign(a,{blockquote:function(e){return'<div class="fork">'+e+"</div>"},code:function(e){try{return new Function("\n\t\t\t\tfunction write() { write.__out += write.__join.call(arguments, ''); }\n\t\t\t\twrite.__out = '';\n\t\t\t\twrite.__join = Array.prototype.join;\n\t\t\t\t"+(0,o.default)(e)+";\n\t\t\t\treturn write.__out;\n\t\t\t").apply(window)}catch(t){if((0,i.get)("config.testing")){return'<div class="error">An error occured evaluating:<pre>'+e+"</pre><p><pre>"+(t.error&&t.error.stack?t.error.stack:t.message+"\n[No stack trace available]")+"</pre></p></div>"}throw t}},del:function(e){return'<span class="small-caps">'+e+"</span>"}}),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markedOptions=void 0,t.default=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.vars)throw new Error("The renderer was given an object with no vars property.");if(!e.blocks)throw new Error("The renderer was given an object with no blocks property.");var i="";o||(c("Setting vars ("+Object.keys(e.vars).length+")"),Object.keys(e.vars).forEach(function(t){c('Setting var "'+t+'"'),(0,u.set)(t,e.vars[t]())}));var l=[],d={};return e.blocks.forEach(function(e){switch(e.type){case"text":var r={text:(0,s.default)((0,a.default)(e.content),t),beforeText:"\n\n",afterText:""};c("Running "+l.length+" modifiers on text block"),l.forEach(function(e){return e.mod.process(r,{state:d[e.mod],invocation:e.invocation})}),i+=r.beforeText+r.text+r.afterText,c("Output after modifiers: "+JSON.stringify(r)),l=[];break;case"modifier":var o=n.filter(function(t){return t.match.test(e.content)});if(1===o.length){var u=o[0];c('Activated "'+u.name+'" modifier matching ['+e.content+"]"),d[u]=d[u]||{},l.push({mod:u,invocation:e.content})}else 0===o.length?i+='<p class="error">No modifiers matched "['+e.content+']". It was ignored.</p>':i+='<p class="error">More than one modifier matched "['+e.content+']". It was ignored.</p>';break;default:throw new Error("Don't know how to render a block with type \""+e.type+'".')}}),r.default.setOptions(f),(0,r.default)(i)};var r=l(n(18)),o=l(n(6)),i=l(n(41)),s=l(n(39)),a=l(n(13)),u=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.default)("render").log,f=t.markedOptions={renderer:i.default,smartypants:!0}},function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string in the first argument, got "+typeof e);if(!(t&&t.preserveNewlines))return e.split(/\r?\n/);for(var n=e.split(/(\r?\n)/),r=[],o=0;o<n.length;o+=2)r.push(n[o]+(n[o+1]||""));return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n={vars:{},blocks:[]},i=e.split(t.varsSep,2),s=void 0,c=void 0;if(2===i.length){a("Detected vars section");var f=r(i,2);s=f[0],c=f[1],(0,o.default)(s).forEach(function(e){if(""!==e.trim()){var t=e.indexOf(":");if(-1!==t){var r=e.substr(0,t).trim(),o=e.substr(t+1).trim();void 0!==n.vars[r]&&u('The property "'+r+'" was defined more than once; using the last value.'),a('Setting prop "'+r+'" to "'+o+'"'),n.vars[r]=new Function("return ("+o+")")}else u('The line "'+e+'" in the properties section is missing a colon. It was ignored.')}})}else a("No vars section detected"),c=i[0];var d=function(e,t){var r=t.trim();""!==r&&(a("Creating '"+e+"' block with content: \""+r+'"'),n.blocks.push({type:e,content:r}))},p=new RegExp(t.modifierPattern),h=0,g=p.exec(c);for(;g;){d("text",c.substring(h,g.index));for(var v=g[1],m="",y=0;y<v.length;y++)switch(v[y]){case'"':for(m+='"',y+=1;y<v.length&&(m+=v[y],'"'!==v[y]||"\\"===v[y-1]);y++);break;case";":d("modifier",m),m="";break;default:m+=v[y]}d("modifier",m),h=p.lastIndex,g=p.exec(c)}return d("text",c.substring(h)),n};var o=i(n(43));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,i(n(6)).default)("parse"),a=s.log,u=s.warn,l={varsSep:/^--$/m,modifierPattern:/^\[([^[].+[^\]])\]$/gm}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^(note(\s+to\s+self)?|n?b?|todo|fixme)$/i,process:function(e){e.text=""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^continued?|cont('d)?$/i,process:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^if\s|else$|unless\s/i,process:function(e,t){var n=t.invocation,r=t.state,o=n.replace(/\s.*/,"").toLowerCase(),i=void 0;switch("else"!==o&&(i=new Function("return "+n.replace(/.*?\s/,""))),o){case"if":r.conditionEval=i.apply(window);break;case"unless":r.conditionEval=!i.apply(window);break;case"else":if(void 0===r.conditionEval)throw new Error("There was no matching if modifier for an else modifier.");r.conditionEval=!r.conditionEval}r.conditionEval||(e.text="",e.beforeText="",e.afterText="")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^append$/i,process:function(e){e.beforeText=" "}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(19));t.default={match:/^align\s+(left|right|center)/i,process:function(e,t){var n=t.invocation.replace(/^align\s+/i,"");e.text=(0,r.default)(e.text,{style:"display: block; text-align: "+n})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(20)),o=i(n(19));function i(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^after\s/i,process:function(e,t){var n=t.invocation,i=(0,r.default)(n.replace(/^after\s/i,""),"ms");e.text=(0,o.default)(e.text,{class:"fade-in",style:"animation-delay: "+i+"ms"})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(50)),o=l(n(49)),i=l(n(48)),s=l(n(47)),a=l(n(46)),u=l(n(45));function l(e){return e&&e.__esModule?e:{default:e}}t.default=[r.default,o.default,i.default,s.default,a.default,u.default]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(1)),o=n(0),i=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^text\s+input(\s+for)?/i,render:function(e,t){return(0,i.default)("input",{type:"text",value:(0,o.get)(e)||"","data-cb-text-field-set":e,required:t.required?"":void 0})}},r.default.on("dom-change",function(e){e.dataset.cbTextFieldSet&&(0,o.set)(e.dataset.cbTextFieldSet,e.value)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=u(n(1)),i=u(n(4)),s=n(5),a=n(10);function u(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^reveal\s+link/i,render:function(e,t){return t.text?(0,i.default)("a",{href:"javascript:void(0)","data-cb-reveal-text":t.text},[e]):t.passage?(0,i.default)("a",{href:"javascript:void(0)","data-cb-reveal-passage":t.passage},[e]):void 0}},o.default.on("dom-click",function(e){var t=e.dataset.cbRevealText;if(e.dataset.cbRevealPassage&&(t=(0,s.passageNamed)(e.dataset.cbRevealPassage).source),t){var n=document.createElement("div");n.innerHTML=(0,a.render)(t),(0,r.changeBody)(function(){if("P"===n.firstChild.nodeName){var t=document.createElement("span");t.innerHTML=n.firstChild.innerHTML,e.parentNode.insertBefore(t,e.nextSibling),n.removeChild(n.firstChild)}for(;n.firstChild;)e.parentNode.parentNode.insertBefore(n.firstChild,e.parentNode.nextSibling);e.parentNode.removeChild(e)})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(4));t.default={match:/^restart\s+link/i,render:function(e,t){return(0,r.default)("a",{href:"javascript:void(0)","data-cb-restart":!0},[t.label||"Restart"])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=n(0),i=n(4),s=a(i);function a(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^dropdown menu(\s+for)?/i,render:function(e,t){var n=(0,o.get)(e);return void 0===n&&((0,o.set)(e,t.choices[0]),n=t.choices[0]),(0,s.default)("select",{"data-cb-menu-set":e},t.choices.map(function(e){return(0,i.domify)("option",{value:e,selected:n===e?"selected":void 0},[e])}))}},r.default.on("dom-change",function(e){e.dataset.cbMenuSet&&(0,o.set)(e.dataset.cbMenuSet,e.querySelectorAll("option")[e.selectedIndex].value)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);t.default={match:/^link\s+to/i,render:function(e,t){return(0,r.renderLink)(e,t.label)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={match:/^embed\s+youtube(\s+video)?/i,render:function(e,t){var n="https://www.youtube-nocookie.com/embed/"+e.replace(/.*\?v=/,"")+"?modestbranding=1&rel=0&controls="+(t.controls?1:0)+"&";return t.autoplay&&(n+="autoplay=1&"),t.loop&&(n+="loop=1&"),(0,o.default)("div",{style:"position: relative; height: 0; padding-bottom: 56.25%; margin-bottom: 1em"},[(0,r.domify)("iframe",{src:n,frameBorder:0,style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%"})])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(4));t.default={match:/^embed\s+unsplash(\s+image)?/i,render:function(e,t){return(0,r.default)("img",Object.assign({},t,{src:"https://source.unsplash.com/"+e.replace(/.*\//,"")+"/"+t.width+"x"+t.height}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(10);t.default={match:/^embed\s+passage(\s+named)?/i,render:function(e){return(0,o.render)((0,r.passageNamed)(e).source)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(4));t.default={match:/^embed\s+image?/i,render:function(e,t){return(0,r.default)("img",Object.assign({},t,{src:e}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(4));t.default={match:/^embed\s+flickr(\s+image)?/i,render:function(e,t){return(0,r.default)("img",Object.assign({},t,{src:/img src="(.+?)"/.exec(e)[1]}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=n(0),i=a(n(1)),s=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^cycling\s+link(\s+for)?/i,render:function(e,t){var n=void 0;return t.set?void 0===(n=(0,o.get)(t.set))&&((0,o.set)(t.set,e[0]),n=e[0]):n=e[0],(0,s.default)("a",{href:"javascript:void(0)","data-cb-cycle-set":t.set,"data-cb-cycle-choices":JSON.stringify(e)},[n])}},i.default.on("dom-click",function(e){if(e.dataset.cbCycleChoices){var t=JSON.parse(e.dataset.cbCycleChoices),n=t.indexOf(e.textContent)+1;n===t.length&&(n=0),(0,r.changeBody)(function(){e.textContent=t[n]}),e.dataset.cbCycleSet&&(0,o.set)(e.dataset.cbCycleSet,t[n])}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(0);t.default={match:/^back\s+link/i,render:function(e,t){var n=(0,o.get)("trail");return(0,r.renderLink)(n.length>1?n[n.length-2]:n[0],t.label||"Back")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(63)),o=g(n(62)),i=g(n(61)),s=g(n(60)),a=g(n(59)),u=g(n(58)),l=g(n(57)),c=g(n(56)),f=g(n(55)),d=g(n(54)),p=g(n(53)),h=g(n(52));function g(e){return e&&e.__esModule?e:{default:e}}t.default=[r.default,o.default,i.default,s.default,a.default,u.default,l.default,c.default,f.default,d.default,p.default,h.default]},function(e,t){var n=Element.prototype,r=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;e.exports=function(e,t){if(r)return r.call(e,t);for(var n=e.parentNode.querySelectorAll(t),o=0;o<n.length;++o)if(n[o]==e)return!0;return!1}},function(e,t,n){var r=n(65);e.exports=function(e,t,n){for(var o=n?e:e.parentNode;o&&o!==document;){if(r(o,t))return o;o=o.parentNode}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){window.addEventListener("error",i),window.addEventListener("unhandledrejection",i)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(66)),o=n(0);function i(e){try{(e.error&&e.error.stack?e.message+"\n\nStack trace:\n"+e.error.stack:e.message+"\n\n[No stack trace available]").replace("\nPlease report this to https://github.com/chjj/marked.","");var t=document.createElement("div"),n=document.querySelector("#page article");t.className="error",t.innerHTML='\n\t\t\t<p>\n\t\t\tAn unexpected error has occurred.\n\t\t\t</p>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" data-cb-back>Go back</a> to the previous passage.\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" data-cb-hard-restart>Hard restart</a>, clearing all progress and beginning from the start.\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t',t.addEventListener("click",function(e){if((0,r.default)(e.target,"[data-cb-back]",!0)){var t=(0,o.get)("trail");Array.isArray(t)?(0,o.set)("trail",t.slice(0,t.length-1)):window.alert("Sorry, going back was not successful. Please try hard restarting.")}else{(0,r.default)(e.target,"[data-cb-hard-restart]",!0)&&((0,o.purgeFromStorage)(!0),window.location.reload())}}),n.innerHTML="",n.appendChild(t)}catch(e){console.log(e)}}},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.none=function(e,t){return new Promise(function(n){e.innerHTML=t,n()})},t.fadeInOut=function(e,t,n){return new Promise(function(s){o(e);var a=(0,r.default)(n,"s")/2,u=document.createElement("div");if(u.innerHTML=t,u.style.visibility="hidden",u.style.animationDuration=a+"s",u.addEventListener("animationend",function e(){u.removeEventListener("animationend",e),u.className="",u.style.animationDuration=a+"s",s()}),""!==e.innerHTML.trim()){var l=i(e);l.style.position="absolute",l.style.top="0",l.style.left="0",l.className="fade-out",l.style.animationDuration=a+"s",l.addEventListener("animationend",function e(){l.removeEventListener("animationend",e),l.parentNode.removeChild(l),u.style.visibility="visible",u.className="fade-in"}),e.innerHTML="",e.appendChild(u),e.appendChild(l)}else u.className="fade-in",u.animationDuration=2*a,u.style.visibility="visible",u.className="fade-in",e.appendChild(u)})},t.crossfade=function(e,t,n){return new Promise(function(s){o(e);var a=(0,r.default)(n,"s"),u=document.createElement("div");if(u.innerHTML=t,u.className="fade-in",u.style.animationDuration=a+"s",u.addEventListener("animationend",function e(){u.removeEventListener("animationend",e),u.style.animationDuration=null,u.className="",s()}),""!==e.innerHTML.trim()){var l=i(e);l.style.position="absolute",l.style.top="0",l.style.left="0",l.className="fade-out",l.style.animationDuration=a+"s",l.addEventListener("animationend",function e(){l.removeEventListener("animationend",e),l.style.opacity=.5,l.parentNode.removeChild(l)}),e.innerHTML="",e.appendChild(u),e.appendChild(l)}else e.innerHTML="",e.appendChild(u)})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(20));function o(e){"static"===window.getComputedStyle(e).position&&(e.style.position="relative")}function i(e){var t=document.createElement(e.nodeName.toLowerCase());return t.innerHTML=e.innerHTML,t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",t.setAttribute("aria-hidden",!0),t.style.pointerEvents="none",t}n(69)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){[r.defaults,o.defaults,i.defaults,s.defaults,a.defaults,u.defaults].forEach(function(e){return Object.keys(e).forEach(function(t){"function"==typeof e[t]?(0,s.setDefault)(t,e[t]()):(0,s.setDefault)(t,e[t])})})};var r=n(11),o=n(6),i=n(22),s=n(0),a=n(17),u=n(10)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("story.name",r.name)};var r=n(5)},function(e,t){},function(e,t,n){var r;!function(o,i){var s,a=this,u=256,l=6,c="random",f=i.pow(u,l),d=i.pow(2,52),p=2*d,h=u-1;function g(e,t,n){var r=[],g=m(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(o)]}}():e,3),r),b=new function(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];n||(e=[n++]);for(;o<u;)s[o]=o++;for(o=0;o<u;o++)s[o]=s[i=h&i+e[o%n]+(t=s[o])],s[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,s=r.S;e--;)t=s[o=h&o+1],n=n*u+s[h&(s[o]=s[i=h&i+t])+(s[i]=t)];return r.i=o,r.j=i,n})(u)}(r),w=function(){for(var e=b.g(l),t=f,n=0;e<d;)e=(e+n)*u,t*=u,n=b.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,m(y(b.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,b),e.state=function(){return v(b,{})}),n?(i[c]=e,t):e})(w,g,"global"in t?t.global:this==i,t.state)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",o=0;o<r.length;)t[h&o]=h&(n^=19*t[h&o])+r.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i["seed"+c]=g,m(i.random(),o),"object"==typeof e&&e.exports){e.exports=g;try{s=n(73)}catch(e){}}else void 0===(r=function(){return g}.call(t,n,t,e))||(e.exports=r)}([],Math)},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var n=new function(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=a:n(2)&&n(7)?void 0===(r=function(){return a}.call(t,n,t,o))||(o.exports=r):this.tychei=a}(0,"object"==typeof e&&e,n(2))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var n=new function(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,s,a=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),o=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(s=s+1640531527|0,o=0==(n=a[127&i]^=r+s)?o+1:0);for(o>=128&&(a[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=a[o+34&127],n=a[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[o]=r^n;e.w=s,e.X=a,e.i=o}(t,e)}(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=a:n(2)&&n(7)?void 0===(r=function(){return a}.call(t,n,t,o))||(o.exports=r):this.xor4096=a}(0,"object"==typeof e&&e,n(2))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var n=new function(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=a:n(2)&&n(7)?void 0===(r=function(){return a}.call(t,n,t,o))||(o.exports=r):this.xorshift7=a}(0,"object"==typeof e&&e,n(2))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var n=new function(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=a:n(2)&&n(7)?void 0===(r=function(){return a}.call(t,n,t,o))||(o.exports=r):this.xorwow=a}(0,"object"==typeof e&&e,n(2))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var n=new function(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=a:n(2)&&n(7)?void 0===(r=function(){return a}.call(t,n,t,o))||(o.exports=r):this.xor128=a}(0,"object"==typeof e&&e,n(2))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var n=new function(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=a:n(2)&&n(7)?void 0===(r=function(){return a}.call(t,n,t,o))||(o.exports=r):this.alea=a}(0,"object"==typeof e&&e,n(2))}).call(this,n(8)(e))},function(e,t,n){var r=n(80),o=n(79),i=n(78),s=n(77),a=n(76),u=n(75),l=n(74);l.alea=r,l.xor128=o,l.xorwow=i,l.xorshift7=s,l.xor4096=a,l.tychei=u,e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("now.second",function(){return(new Date).getSeconds()}),e("now.minute",function(){return(new Date).getMinutes()}),e("now.hour",function(){return(new Date).getHours()}),e("now.day",function(){return(new Date).getDate()}),e("now.weekday",function(){return(new Date).getDay()+1}),e("now.weekdayName",function(){return(new Date).toLocaleString(navigator.language,{weekday:"long"})}),e("now.month",function(){return(new Date).getMonth()+1}),e("now.monthName",function(){return(new Date).toLocaleString(navigator.language,{month:"long"})}),e("now.year",function(){return(new Date).getFullYear()}),e("now.timestamp",function(){return(new Date).toLocaleString(navigator.language,{hour:"numeric",minute:"numeric",second:"numeric"})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("browser.height",function(){return window.innerHeight}),e("browser.online",function(){return window.navigator.onLine}),e("browser.width",function(){return window.innerWidth})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,r.default)(a.setLookup),(0,o.default)(a.setLookup),(0,i.default)(a.setLookup),(0,s.default)(a.setLookup)};var r=u(n(83)),o=u(n(82)),i=u(n(22)),s=u(n(72)),a=n(0);function u(e){return e&&e.__esModule?e:{default:e}}},,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);n(88);t.default=class extends r.Component{constructor(e){super(e),this.state={selected:0}}select(e){this.setState({selected:e})}render(){const e=this.props.children.map((e,t)=>(0,r.h)("li",null,(0,r.h)("button",{onClick:()=>this.select(t),class:t===this.state.selected&&"active"},e.attributes.label)));return(0,r.h)("div",null,(0,r.h)("ul",{class:"tabs"},e),(0,r.h)("div",{class:"tab-content"},this.props.children[this.state.selected]))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({label:e,binding:t}){return(0,r.h)("p",{class:"input-group"},(0,r.h)("label",{for:`cb-backstage-${t}`},e),(0,r.h)("input",{type:"text",id:`cb-backstage-${t}`,value:(0,o.get)(t),onChange:e=>(0,o.set)(t,e.target.value)}))};var r=n(3),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({title:e,prefix:t}){return(0,r.h)(o.default,{title:e,initiallyOpen:!1},(0,r.h)(i.default,{label:"Font",binding:`config.style.${t}.font`}),(0,r.h)(i.default,{label:"Color",binding:`config.style.${t}.color`}),(0,r.h)(i.default,{label:"Link Font",binding:`config.style.${t}.link.font`}),(0,r.h)(i.default,{label:"Link Color",binding:`config.style.${t}.link.color`}),(0,r.h)(i.default,{label:"Link Line Color",binding:`config.style.${t}.link.lineColor`}),(0,r.h)(i.default,{label:"Active Link Font",binding:`config.style.${t}.link.active.font`}),(0,r.h)(i.default,{label:"Active Link Color",binding:`config.style.${t}.link.active.color`}),(0,r.h)(i.default,{label:"Active Link Line Color",binding:`config.style.${t}.link.active.lineColor`}))};var r=n(3),o=s(n(9)),i=s(n(90));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=s.reduce((e,t)=>{const n=(0,o.get)(t);return n?e+`${t}: ${JSON.stringify(n)}\n`:e},"").trim();return(0,r.h)(i.default,{title:"Config"},(0,r.h)("p",null,(0,r.h)("label",{for:"cb-backstage-style-config"},"Enter this code into your first passage’s vars section to permanently use this style:")),(0,r.h)("p",null,(0,r.h)("textarea",{readonly:!0,id:"cb-backstage-style-config",onClick:e=>e.target.select()},e)))};var r=n(3),o=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(n(9));const s=["page","page.header","page.footer"].reduce((e,t)=>e.concat([`config.style.${t}.font`,`config.style.${t}.color`,`config.style.${t}.link.font`,`config.style.${t}.link.color`,`config.style.${t}.link.lineColor`,`config.style.${t}.link.active.font`,`config.style.${t}.link.active.color`,`config.style.${t}.link.active.lineColor`]),[])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.h)("div",null,(0,r.h)(o.default,null),(0,r.h)(i.default,{title:"Page",prefix:"page"}),(0,r.h)(i.default,{title:"Header",prefix:"page.header"}),(0,r.h)(i.default,{title:"Footer",prefix:"page.footer"}))};var r=n(3),o=s(n(92)),i=s(n(91));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=a(n(9)),i=n(0),s=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class extends r.Component{constructor(e){super(e),this.state={varNames:[],showDefaults:!1},this.syncBound=(()=>this.syncWithState())}syncWithState(){this.setState({varNames:(0,i.varNames)(this.state.showDefaults)})}onChangeDefaults(e){this.setState({showDefaults:e.target.checked})}onChangeVar(e,t){(0,i.set)(t,JSON.parse(e.target.value))}render(){return(0,r.h)(o.default,{title:"Variables"},(0,r.h)("p",null,(0,r.h)("input",{type:"checkbox",id:"cb-backstage-show-defaults",checked:this.state.showDefaults,onChange:e=>this.onChangeDefaults(e)}),(0,r.h)("label",{for:"cb-backstage-show-defaults"},"Show Defaults")),(0,r.h)("table",null,this.state.varNames.map(e=>(0,r.h)("tr",null,(0,r.h)("td",null,e),(0,r.h)("td",null,(0,r.h)("input",{type:"text",value:JSON.stringify((0,i.get)(e)),onChange:t=>this.onChangeVar(t,e)}))))))}componentWillMount(){this.syncWithState(),s.default.on("state-change",this.syncBound)}componentDidUpdate(e,t){t.showDefaults!==this.state.showDefaults&&this.syncWithState()}componentWillUnmount(){s.default.removeListener("state-change",this.syncBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(n(9));t.default=class extends r.Component{constructor(e){super(e),this.state={snapshots:[]},this.restore()}addSnapshot(){const e=window.prompt("Enter a name for this snapshot:");e&&this.setState({snapshots:this.state.snapshots.concat({name:e,state:(0,o.saveToObject)()})})}loadSnapshot(e){(0,o.restoreFromObject)(this.state.snapshots[e].state)}deleteSnapshot(e){window.confirm(`Are you sure you want to delete the snapshot "${this.state.snapshots[e].name}"? This cannot be undone.`)&&this.setState({snapshots:this.state.snapshots.filter((t,n)=>n!==e)})}save(){window.localStorage.setItem(`cb-snapshots-${(0,o.get)("config.state.saveKey")}`,JSON.stringify(this.state.snapshots))}restore(){const e=window.localStorage.getItem(`cb-snapshots-${(0,o.get)("config.state.saveKey")}`);e&&this.setState({snapshots:JSON.parse(e)})}render(){const e=this.state.snapshots.map((e,t)=>(0,r.h)("div",{class:"segmented-button block"},(0,r.h)("button",{onClick:()=>this.loadSnapshot(t),title:'Load snapshot "{s.name}"'},e.name),(0,r.h)("button",{onClick:()=>this.deleteSnapshot(t),class:"fixed",title:'Delete snapshot "{s.name}"'},(0,r.h)("strong",null,"×"))));return(0,r.h)(i.default,{title:"Snapshots"},e,(0,r.h)("button",{class:"block",onClick:()=>this.addSnapshot()},"Add Snapshot"))}componentDidUpdate(){this.save()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.h)("div",null,(0,r.h)(i.default,null),(0,r.h)(o.default,null))};var r=n(3),o=s(n(95)),i=s(n(94));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),i=n(0);t.default=class extends r.Component{constructor(e){super(e);const t=(0,i.get)("trail");this.state={currentPassage:t[t.length-1],notes:{}},this.restore(),this.syncBound=(e=>this.sync(e))}sync({name:e,value:t}){"trail"===e&&(this.setState({currentPassage:t[t.length-1]}),console.log("Changing notes view"))}restore(){const e=window.localStorage.getItem(`cb-passage-notes-${(0,i.get)("config.state.saveKey")}`);e&&this.setState({notes:JSON.parse(e)})}save(){window.localStorage.setItem(`cb-passage-notes-${(0,i.get)("config.state.saveKey")}`,JSON.stringify(this.state.notes))}saveNote(e,t){const n=Object.assign({},this.state.notes);n[e]=t,this.setState({notes:n}),this.save()}render(){return(0,r.h)("div",null,(0,r.h)("p",null,(0,r.h)("label",null,"Notes on “",this.state.currentPassage,"”")),(0,r.h)("p",null,(0,r.h)("textarea",{value:this.state.notes[this.state.currentPassage],onInput:e=>this.saveNote(this.state.currentPassage,e.target.value)})))}componentDidMount(){o.default.on("state-change",this.syncBound)}componentDidUnmount(){o.default.removeListener("state-change",this.syncBound)}}},,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=a(n(9)),i=a(n(1)),s=n(23);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){const t=[];let n={vars:[]};return e.forEach(({change:e})=>{"trail"===e.name?(n.passage&&t.push(n),n={passage:e.value[e.value.length-1],vars:[]}):n.vars.push({name:e.name,value:e.value})}),(n.vars.length>0||n.passage)&&t.push(n),t}function l({passage:e,vars:t,index:n}){const o=[(0,r.h)("tr",null,(0,r.h)("td",{class:"actions",rowspan:t.length+1},(0,r.h)("button",{onClick:()=>(0,s.rewindTo)(n)},"↪")),(0,r.h)("td",{class:"go",rowspan:t.length+1,colspan:t.length>0?1:2},"Go to “",e,"”"))];return t.forEach(e=>{o.push((0,r.h)("tr",null,(0,r.h)("td",null,e.name," ← ",JSON.stringify(e.value))))}),o}n(99);t.default=class extends r.Component{constructor(e){super(e),this.state={history:u(s.history)},this.updateBound=(()=>this.update())}update(){this.setState({history:u(s.history)})}render(){let e;return e=this.state.history.length>0?(0,r.h)("div",null,(0,r.h)("table",{class:"history"},this.state.history.map(l))):(0,r.h)("p",null,(0,r.h)("em",null,"No history has been recorded yet.")),(0,r.h)(o.default,{title:"History"},e)}componentDidMount(){i.default.on("state-change",this.updateBound)}componentDidUnmount(){i.default.removeEventListener("state-change",this.updateBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Backstage=void 0,t.init=function(){(0,o.init)(),(0,r.render)((0,r.h)(f,null),document.body)};var r=n(3),o=n(23),i=c(n(102)),s=c(n(97)),a=c(n(96)),u=c(n(93)),l=c(n(89));function c(e){return e&&e.__esModule?e:{default:e}}n(86);class f extends r.Component{constructor(e){super(e),this.state={open:!0}}setBodyClass(){this.state.open?document.body.classList.add("backstage-visible"):document.body.classList.remove("backstage-visible")}toggle(){this.setState({open:!this.state.open})}render(){const e=this.state.open?{icon:"→",text:"Close"}:{icon:"←",text:"Open"};return(0,r.h)("div",{id:"backstage",class:this.state.open&&"open"},(0,r.h)("button",{onClick:e=>this.toggle(),title:e.text+" backstage panel",class:"toggle-visibility"},e.icon),(0,r.h)(l.default,null,(0,r.h)(a.default,{label:"State"}),(0,r.h)(i.default,{label:"History"}),(0,r.h)(u.default,{label:"Style"}),(0,r.h)(s.default,{label:"Notes"})))}componentDidMount(){this.setBodyClass()}componentDidUpdate(){this.setBodyClass()}}t.Backstage=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validate=function(){var e=document.querySelector("form#cb-validation"),t=(0,r.selectAll)(e,"input, select");return new Promise(function(n,r){var o=function n(){e.removeEventListener("submit",i),t.forEach(function(e){return e.removeEventListener("invalid",n)}),r()},i=function r(){e.removeEventListener("submit",r),t.forEach(function(e){return e.removeEventListener("invalid",o)}),n()};t.forEach(function(e){return e.addEventListener("invalid",o)}),e.addEventListener("submit",i),document.querySelector("button#cb-validation-tester").click()})},t.transferToState=function(){(0,r.selectAll)(document,"[data-cb-set]").forEach(function(e){var t=e.dataset.set;switch(e.nodeName){case"INPUT":(0,o.set)(t,e.value);break;case"SELECT":(0,o.set)(t,e.options[e.selectedIndex].value);break;default:(0,o.set)(t,e.textContent)}})};var r=n(24),o=n(0)},function(e,t,n){"use strict";e.exports=function(e,t,n){if((t-=(e+="").length)<=0)return e;n||0===n||(n=" ");if(" "==(n+="")&&t<10)return r[t]+e;var o="";for(;1&t&&(o+=n),t>>=1;)n+=n;return o+e};var r=[""," ","  ","   ","    ","     ","      ","       ","        ","         "]},function(e,t){function n(e){return e?Array.isArray(e)?e.join("."):e:""}
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e,t,r,o,i){if(!function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}(e)||!t)return e;if(t=n(t),r&&(t+="."+n(r)),o&&(t+="."+n(o)),i&&(t+="."+n(i)),t in e)return e[t];for(var s=t.split("."),a=s.length,u=-1;e&&++u<a;){for(var l=s[u];"\\"===l[l.length-1];)l=l.slice(0,-1)+"."+s[++u];e=e[l]}return e}},function(e,t,n){"use strict";
/*!
 * has-values <https://github.com/jonschlinkert/has-values>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */e.exports=function(e,t){if(null===e||void 0===e)return!1;if("boolean"==typeof e)return!0;if("number"==typeof e)return 0!==e||!0!==t;if(void 0!==e.length)return 0!==e.length;for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r=n(108);e.exports=function(e){return null!=e&&"object"==typeof e&&!1===r(e)}},function(e,t,n){"use strict";
/*!
 * has-value <https://github.com/jonschlinkert/has-value>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r=n(109),o=n(107),i=n(106);e.exports=function(e,t,n){return r(e)?o(i(e,t),n):o(e,t)}},function(e,t,n){"use strict";
/*!
 * unset-value <https://github.com/jonschlinkert/unset-value>
 *
 * Copyright (c) 2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(14),o=n(110);e.exports=function(e,t){if(!r(e))throw new TypeError("expected an object.");if(e.hasOwnProperty(t))return delete e[t],!0;if(o(e,t)){for(var n=t.split("."),i=n.pop();n.length&&"\\"===n[n.length-1].slice(-1);)i=n.pop().slice(0,-1)+"."+i;for(;n.length;)e=e[t=n.shift()];return delete e[i]}return!0}},function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(14);function o(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==o(e)&&("function"==typeof(t=e.constructor)&&(!1!==o(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},function(e,t,n){"use strict";
/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */const r=n(112);function o(e,t,n,r){if(!s(e))return e;let a=r||{};const u=Array.isArray(t);if(!u&&"string"!=typeof t)return e;let l=a.merge;l&&"function"!=typeof l&&(l=Object.assign);const c=u?t:function(e,t){const n=function(e,t){let n=e;if(void 0===t)return n+"";const r=Object.keys(t);for(let e=0;e<r.length;e++){const o=r[e];n+=";"+o+"="+String(t[o])}return n}(e,t);if(o.memo[n])return o.memo[n];const r=t&&t.separator?t.separator:".";let i=[],s=[];i=t&&"function"==typeof t.split?t.split(e):e.split(r);for(let e=0;e<i.length;e++){let t=i[e];for(;t&&"\\"===t.slice(-1)&&i[e+1];)t=t.slice(0,-1)+r+i[++e];s.push(t)}return o.memo[n]=s,s}(t,a),f=c.length,d=e;if(!r&&1===c.length)return i(e,c[0],n,l),e;for(let t=0;t<f;t++){let r=c[t];if(s(e[r])||(e[r]={}),t===f-1){i(e,r,n,l);break}e=e[r]}return d}function i(e,t,n,o){o&&r(e[t])&&r(n)?e[t]=o({},e[t],n):e[t]=n}function s(e){switch(typeof e){case"null":return!1;case"object":case"function":return!0;default:return!1}}o.memo={},e.exports=o},function(e,t,n){
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
const r=n(14);function o(e,t,n){return"function"==typeof n.join?n.join(e):e[0]+t+e[1]}function i(e,t,n){return"function"!=typeof n.isValid||n.isValid(e,t)}function s(e){return r(e)||Array.isArray(e)||"function"==typeof e}e.exports=function(e,t,n){if(r(n)||(n={default:n}),!s(e))return void 0!==n.default?n.default:e;"number"==typeof t&&(t=String(t));const a=Array.isArray(t),u="string"==typeof t,l=n.separator||".",c=n.joinChar||("string"==typeof l?l:".");if(!u&&!a)return e;if(u&&t in e)return i(t,e,n)?e[t]:n.default;let f=a?t:function(e,t,n){if("function"==typeof n.split)return n.split(e);return e.split(t)}(t,l,n),d=f.length,p=0;do{let t=f[p];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=o([t.slice(0,-1),f[++p]||""],c,n);if(t in e){if(!i(t,e,n))return n.default;e=e[t]}else{let r=!1,s=p+1;for(;s<d;)if(r=(t=o([t,f[s++]],c,n))in e){if(!i(t,e,n))return n.default;e=e[t],p=s-1;break}if(!r)return n.default}}while(++p<d&&s(e));return p===d?e:n.default}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,l=[],c=!1,f=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&p())}function p(){if(!c){var e=a(d);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||c||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){(function(e,r){var o=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(e).replace(o,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<i;u=r[++n])g(u)||!w(u)?s+=" "+u:s+=" "+a(u);return s},t.deprecate=function(n,o){if(y(e.process))return function(){return t.deprecate(n,o).apply(this,arguments)};if(!0===r.noDeprecation)return n;var i=!1;return function(){if(!i){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),i=!0}return n.apply(this,arguments)}};var i,s={};function a(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,e,r.depth)}function u(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function l(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&k(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return m(o)||(o=c(e,o,r)),o}var i=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(v(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(i)return i;var s=Object.keys(n),a=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),_(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(k(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(_(n))return f(n)}var l,w="",S=!1,O=["{","}"];(p(n)&&(S=!0,O=["[","]"]),k(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(w=" "+RegExp.prototype.toString.call(n)),x(n)&&(w=" "+Date.prototype.toUTCString.call(n)),_(n)&&(w=" "+f(n)),0!==s.length||S&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=S?function(e,t,n,r,o){for(var i=[],s=0,a=t.length;s<a;++s)C(t,String(s))?i.push(d(e,t,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(d(e,t,n,r,o,!0))}),i}(e,n,r,a,s):s.map(function(t){return d(e,n,r,a,t,S)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,w,O)):O[0]+w+O[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,o,i){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),C(r,o)||(s="["+o+"]"),a||(e.seen.indexOf(u.value)<0?(a=g(n)?c(e,u.value,null):c(e,u.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),y(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return"number"==typeof e}function m(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===S(e)}function w(e){return"object"==typeof e&&null!==e}function x(e){return w(e)&&"[object Date]"===S(e)}function _(e){return w(e)&&("[object Error]"===S(e)||e instanceof Error)}function k(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(y(i)&&(i=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var n=r.pid;s[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else s[e]=function(){};return s[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=h,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=w,t.isDate=x,t.isError=_,t.isFunction=k,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(116);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=n(115),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,n(12),n(117))},function(e,t,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}function o(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=n(118),s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,u="foo"===function(){}.name;function l(e){return Object.prototype.toString.call(e)}function c(e){return!o(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var f=e.exports=m,d=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(i.isFunction(e)){if(u)return e.name;var t=e.toString().match(d);return t&&t[1]}}function h(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(u||!i.isFunction(e))return i.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function v(e,t,n,r,o){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function m(e,t){e||v(e,!0,t,"==",f.ok)}function y(e,t,n,s){if(e===t)return!0;if(o(e)&&o(t))return 0===r(e,t);if(i.isDate(e)&&i.isDate(t))return e.getTime()===t.getTime();if(i.isRegExp(e)&&i.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(c(e)&&c(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;var u=(s=s||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(i.isPrimitive(e)||i.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=b(e),s=b(t);if(o&&!s||!o&&s)return!1;if(o)return e=a.call(e),t=a.call(t),y(e,t,n);var u,l,c=_(e),f=_(t);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),l=c.length-1;l>=0;l--)if(c[l]!==f[l])return!1;for(l=c.length-1;l>=0;l--)if(u=c[l],!y(e[u],t[u],n,r))return!1;return!0}(e,t,n,s))}return n?e===t:e==t}function b(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e,t,n,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&v(o,n,"Missing expected exception"+r);var s="string"==typeof r,a=!e&&i.isError(o),u=!e&&o&&!n;if((a&&s&&w(o,n)||u)&&v(o,n,"Got unwanted exception"+r),e&&o&&n&&!w(o,n)||!e&&o)throw o}f.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return h(g(e.actual),128)+" "+e.operator+" "+h(g(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=p(t),i=r.indexOf("\n"+o);if(i>=0){var s=r.indexOf("\n",i+1);r=r.substring(s+1)}this.stack=r}}},i.inherits(f.AssertionError,Error),f.fail=v,f.ok=m,f.equal=function(e,t,n){e!=t&&v(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&v(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){y(e,t,!1)||v(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){y(e,t,!0)||v(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){y(e,t,!1)&&v(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){y(t,n,!0)&&v(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&v(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&v(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){x(!0,e,t,n)},f.doesNotThrow=function(e,t,n){x(!1,e,t,n)},f.ifError=function(e){if(e)throw e};var _=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}}).call(this,n(12))},function(e,t,n){var r=n(25),o="undefined"!=typeof window;function i(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}i.prototype.push=function(e){r.equal(typeof e,"function","nanoscheduler.push: cb should be type function"),this.queue.push(e),this.schedule()},i.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},i.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},e.exports=function(){var e;return o?(window._nanoScheduler||(window._nanoScheduler=new i(!0)),e=window._nanoScheduler):e=new i,e}},function(e,t,n){var r,o=n(120)(),i=n(25);s.disabled=!0;try{r=window.performance,s.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!r.mark}catch(e){}function s(e){if(i.equal(typeof e,"string","nanotiming: name should be type string"),s.disabled)return a;var t=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function u(i){var s="end-"+t+"-"+e;r.mark(s),o.push(function(){var o=null;try{var a=e+" ["+t+"]";r.measure(a,n,s),r.clearMarks(n),r.clearMarks(s)}catch(e){o=e}i&&i(o,e)})}return r.mark(n),u.uuid=t,u}function a(e){e&&o.push(function(){e(new Error("nanotiming: performance API unavailable"))})}e.exports=s},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o=e.length;if(!(t>=o||0===n)){var i=o-(n=t+n>o?o-t:n);for(r=t;r<i;++r)e[r]=e[r+n];e.length=i}}},function(e,t,n){var r=n(122),o=n(121),i=n(119);function s(e){if(!(this instanceof s))return new s(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}e.exports=s,s.prototype.emit=function(e){i.equal(typeof e,"string","nanobus.emit: eventName should be type string");for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var s=o(this._name+"('"+e+"')"),a=this._listeners[e];return a&&a.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,s.uuid),s(),this},s.prototype.on=s.prototype.addListener=function(e,t){return i.equal(typeof e,"string","nanobus.on: eventName should be type string"),i.equal(typeof t,"function","nanobus.on: listener should be type function"),"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},s.prototype.prependListener=function(e,t){return i.equal(typeof e,"string","nanobus.prependListener: eventName should be type string"),i.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},s.prototype.once=function(e,t){i.equal(typeof e,"string","nanobus.once: eventName should be type string"),i.equal(typeof t,"function","nanobus.once: listener should be type function");var n=this;return this.on(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},s.prototype.prependOnceListener=function(e,t){i.equal(typeof e,"string","nanobus.prependOnceListener: eventName should be type string"),i.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var n=this;return this.prependListener(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},s.prototype.removeListener=function(e,t){return i.equal(typeof e,"string","nanobus.removeListener: eventName should be type string"),i.equal(typeof t,"function","nanobus.removeListener: listener should be type function"),"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(r(e,n,1),!0):void 0}}},s.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},s.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,o=0;o<r;o++)n.push(t[o]);return n},s.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t].concat(n,r):[t].concat(n));for(var o=e.length,i=0;i<o;i++){var s=e[i];s.apply(s,n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go=l,t.restart=c;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o=n(0),i=n(6),s=n(5),a=n(104);function u(e){(0,i.log)("actions",e)}function l(e){u('Going to passage "'+e+'"');var t=(0,s.passageNamed)(e);if(!t)throw new Error('There is no passage with the name "'+e+'"');(0,a.transferToState)(),(0,o.set)("trail",(0,o.get)("trail").concat(t.name))}function c(){u("Restarting"),(0,o.reset)(),window.location.reload()}r.default.on("dom-click",function(e){e.dataset.cbGo&&(0,a.validate)().then(function(){return l(e.dataset.cbGo)})}),r.default.on("dom-click",function(e){e.dataset.cbRestart&&c()})},function(e,t,n){"use strict";var r=n(124),o=n(103),i=n(0),s=f(n(84)),a=f(n(71)),u=n(11),l=n(5),c=n(17);function f(e){return e&&e.__esModule?e:{default:e}}n(27),(0,l.loadFromData)(document.querySelector("tw-storydata")),(0,i.init)(),Object.assign(window,{go:r.go,restart:r.restart}),(0,c.init)(),(0,a.default)(),(0,s.default)(),(0,u.init)(),(0,l.init)(),(0,i.get)("config.testing")&&(0,o.init)(),(0,i.canRestoreFromStorage)()&&(0,i.restoreFromStorage)(),(0,l.addCustomStyles)(),(0,l.runCustomScripts)()}]);</script></body></html>